<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="Generator" content="Kate, the KDE Advanced Text Editor" />
<title>cd-track-delayed-publication.php</title>
</head>
<body>
<pre>
<span style="font-weight: bold;color: #000000;">&lt;?php</span>

<span style="font-weight: bold;color: #000000;">function</span><span style="color: #000000;"> renderTracks</span><span style="color: #008000;">()</span><span style="color: #000000;"> {</span>
<span style="color: #000000;">  </span><span style="font-style: italic;color: #808080;"># Track list</span>
<span style="color: #000000;">  </span><span style="color: #5555ff;">$track_list</span><span style="color: #000000;"> = </span><span style="color: #000080;">array</span><span style="color: #008000;">(</span>
<span style="color: #000000;">      </span><span style="color: #dd0000;">&#34;Track 1&#34;</span><span style="color: #000000;"> =&gt; </span><span style="color: #dd0000;">&#34;cd-track-1&#34;</span>
<span style="color: #000000;">    </span><span style="color: #008000;">,</span><span style="color: #000000;"> </span><span style="color: #dd0000;">&#34;Track 2&#34;</span><span style="color: #000000;"> =&gt; </span><span style="color: #dd0000;">&#34;cd-track-2&#34;</span>
<span style="color: #000000;">    </span><span style="color: #008000;">,</span><span style="color: #000000;"> </span><span style="color: #dd0000;">&#34;Track 3&#34;</span><span style="color: #000000;"> =&gt; </span><span style="color: #dd0000;">&#34;cd-track-3&#34;</span>
<span style="color: #000000;">    </span><span style="color: #008000;">,</span><span style="color: #000000;"> </span><span style="color: #dd0000;">&#34;Track 4&#34;</span><span style="color: #000000;"> =&gt; </span><span style="color: #dd0000;">&#34;cd-track-4&#34;</span>
<span style="color: #000000;">    </span><span style="color: #008000;">,</span><span style="color: #000000;"> </span><span style="color: #dd0000;">&#34;Track 5&#34;</span><span style="color: #000000;"> =&gt; </span><span style="color: #dd0000;">&#34;cd-track-5&#34;</span>
<span style="color: #000000;">    </span><span style="color: #008000;">);</span>
<span style="color: #000000;">  </span><span style="font-style: italic;color: #808080;"># All variation of each track</span>
<span style="color: #000000;">  </span><span style="color: #5555ff;">$track_format</span><span style="color: #000000;"> = </span><span style="color: #000080;">array</span><span style="color: #008000;">(</span>
<span style="color: #000000;">      </span><span style="color: #dd0000;">&#34;.mp3&#34;</span><span style="color: #000000;">  =&gt; </span><span style="color: #dd0000;">&#34;Mp3&#34;</span>
<span style="color: #000000;">    </span><span style="color: #008000;">,</span><span style="color: #000000;"> </span><span style="color: #dd0000;">&#34;.ogg&#34;</span><span style="color: #000000;">  =&gt; </span><span style="color: #dd0000;">&#34;Ogg/Vorbis&#34;</span>
<span style="color: #000000;">    </span><span style="color: #008000;">,</span><span style="color: #000000;"> </span><span style="color: #dd0000;">&#34;.flac&#34;</span><span style="color: #000000;"> =&gt; </span><span style="color: #dd0000;">&#34;Flac&#34;</span>
<span style="color: #000000;">    </span><span style="color: #008000;">);</span>
<span style="color: #000000;">  </span><span style="font-style: italic;color: #808080;"># This is the list of all tracks which are always visible.</span>
<span style="color: #000000;">  </span><span style="color: #5555ff;">$always_visible</span><span style="color: #000000;"> = </span><span style="color: #000080;">array</span><span style="color: #008000;">(</span><span style="color: #0000ff;">1</span><span style="color: #008000;">,</span><span style="color: #000000;"> </span><span style="color: #0000ff;">4</span><span style="color: #008000;">);</span>
<span style="color: #000000;">  </span><span style="font-style: italic;color: #808080;"># Date and time when the &#34;always_visible&#34; tracks will be displayed.</span>
<span style="color: #000000;">  </span><span style="color: #5555ff;">$start_date</span><span style="color: #000000;"> = </span><span style="color: #000080;">mktime</span><span style="color: #008000;">(</span><span style="color: #0000ff;">18</span><span style="color: #008000;">,</span><span style="color: #000000;"> </span><span style="color: #0000ff;">0</span><span style="color: #008000;">,</span><span style="color: #000000;"> </span><span style="color: #0000ff;">0</span><span style="color: #008000;">,</span><span style="color: #000000;"> </span><span style="color: #0000ff;">12</span><span style="color: #008000;">,</span><span style="color: #000000;"> </span><span style="color: #0000ff;">1</span><span style="color: #008000;">,</span><span style="color: #000000;"> </span><span style="color: #0000ff;">2006</span><span style="color: #008000;">);</span>
<span style="color: #000000;">  </span><span style="font-style: italic;color: #808080;"># Delay between each track publication. Look at strtotime() manual for details.</span>
<span style="color: #000000;">  </span><span style="color: #5555ff;">$delay</span><span style="color: #000000;"> = </span><span style="color: #dd0000;">&#34;+1 week&#34;</span><span style="color: #008000;">;</span>

<span style="color: #000000;">  </span><span style="color: #5555ff;">$today</span><span style="color: #000000;"> = </span><span style="color: #000080;">mktime</span><span style="color: #008000;">();</span>
<span style="color: #000000;">  </span><span style="color: #5555ff;">$months</span><span style="color: #000000;"> = </span><span style="color: #000080;">array</span><span style="color: #008000;">(</span>
<span style="color: #000000;">       </span><span style="color: #0000ff;">1</span><span style="color: #000000;"> =&gt; </span><span style="color: #dd0000;">&#34;Janvier&#34;</span>
<span style="color: #000000;">    </span><span style="color: #008000;">,</span><span style="color: #000000;">  </span><span style="color: #0000ff;">2</span><span style="color: #000000;"> =&gt; </span><span style="color: #dd0000;">&#34;Février&#34;</span>
<span style="color: #000000;">    </span><span style="color: #008000;">,</span><span style="color: #000000;">  </span><span style="color: #0000ff;">3</span><span style="color: #000000;"> =&gt; </span><span style="color: #dd0000;">&#34;Mars&#34;</span>
<span style="color: #000000;">    </span><span style="color: #008000;">,</span><span style="color: #000000;">  </span><span style="color: #0000ff;">4</span><span style="color: #000000;"> =&gt; </span><span style="color: #dd0000;">&#34;Avril&#34;</span>
<span style="color: #000000;">    </span><span style="color: #008000;">,</span><span style="color: #000000;">  </span><span style="color: #0000ff;">5</span><span style="color: #000000;"> =&gt; </span><span style="color: #dd0000;">&#34;Mai&#34;</span>
<span style="color: #000000;">    </span><span style="color: #008000;">,</span><span style="color: #000000;">  </span><span style="color: #0000ff;">6</span><span style="color: #000000;"> =&gt; </span><span style="color: #dd0000;">&#34;Juin&#34;</span>
<span style="color: #000000;">    </span><span style="color: #008000;">,</span><span style="color: #000000;">  </span><span style="color: #0000ff;">7</span><span style="color: #000000;"> =&gt; </span><span style="color: #dd0000;">&#34;Juillet&#34;</span>
<span style="color: #000000;">    </span><span style="color: #008000;">,</span><span style="color: #000000;">  </span><span style="color: #0000ff;">8</span><span style="color: #000000;"> =&gt; </span><span style="color: #dd0000;">&#34;Août&#34;</span>
<span style="color: #000000;">    </span><span style="color: #008000;">,</span><span style="color: #000000;">  </span><span style="color: #0000ff;">9</span><span style="color: #000000;"> =&gt; </span><span style="color: #dd0000;">&#34;Septembre&#34;</span>
<span style="color: #000000;">    </span><span style="color: #008000;">,</span><span style="color: #000000;"> </span><span style="color: #0000ff;">10</span><span style="color: #000000;"> =&gt; </span><span style="color: #dd0000;">&#34;Octobre&#34;</span>
<span style="color: #000000;">    </span><span style="color: #008000;">,</span><span style="color: #000000;"> </span><span style="color: #0000ff;">11</span><span style="color: #000000;"> =&gt; </span><span style="color: #dd0000;">&#34;Novembre&#34;</span>
<span style="color: #000000;">    </span><span style="color: #008000;">,</span><span style="color: #000000;"> </span><span style="color: #0000ff;">12</span><span style="color: #000000;"> =&gt; </span><span style="color: #dd0000;">&#34;Décembre&#34;</span>
<span style="color: #000000;">  </span><span style="color: #008000;">);</span>

<span style="color: #000000;">  </span><span style="font-style: italic;color: #808080;"># Compute publishing date of each track</span>
<span style="color: #000000;">  </span><span style="color: #5555ff;">$track_dates</span><span style="color: #000000;"> = </span><span style="color: #000080;">array</span><span style="color: #008000;">();</span>
<span style="color: #000000;">  </span><span style="color: #5555ff;">$track_number</span><span style="color: #000000;"> = </span><span style="color: #0000ff;">0</span><span style="color: #008000;">;</span>
<span style="color: #000000;">  </span><span style="color: #5555ff;">$track_publish_queue_order</span><span style="color: #000000;"> = </span><span style="color: #0000ff;">0</span><span style="color: #008000;">;</span>
<span style="color: #000000;">  </span><span style="color: #5555ff;">$previous_queue_date</span><span style="color: #000000;"> = </span><span style="color: #5555ff;">$start_date</span><span style="color: #008000;">;</span>
<span style="color: #000000;">  </span><span style="color: #5555ff;">$new_start_date</span><span style="color: #000000;"> = </span><span style="color: #5555ff;">$start_date</span><span style="color: #008000;">;</span>
<span style="color: #000000;">  </span><span style="color: #a1a100;">foreach</span><span style="color: #008000;">(</span><span style="color: #5555ff;">$track_list</span><span style="color: #000000;"> </span><span style="color: #a1a100;">as</span><span style="color: #000000;"> </span><span style="color: #5555ff;">$track_title</span><span style="color: #000000;"> =&gt; </span><span style="color: #5555ff;">$track_file</span><span style="color: #008000;">)</span><span style="color: #000000;"> {</span>
<span style="color: #000000;">    </span><span style="color: #5555ff;">$track_number</span><span style="color: #000000;">++</span><span style="color: #008000;">;</span>
<span style="color: #000000;">    </span><span style="font-style: italic;color: #808080;"># Is the track always published ?</span>
<span style="color: #000000;">    </span><span style="color: #a1a100;">if</span><span style="color: #000000;"> </span><span style="color: #008000;">(</span><span style="color: #000080;">in_array</span><span style="color: #008000;">(</span><span style="color: #5555ff;">$track_number</span><span style="color: #008000;">,</span><span style="color: #000000;"> </span><span style="color: #5555ff;">$always_visible</span><span style="color: #008000;">))</span><span style="color: #000000;"> {</span>
<span style="color: #000000;">      </span><span style="font-style: italic;color: #808080;"># Set publishing date to the start date</span>
<span style="color: #000000;">      </span><span style="color: #5555ff;">$track_dates</span><span style="color: #008000;">[</span><span style="color: #5555ff;">$track_number</span><span style="color: #008000;">]</span><span style="color: #000000;"> = </span><span style="color: #5555ff;">$start_date</span><span style="color: #008000;">;</span>
<span style="color: #000000;">    } </span><span style="color: #a1a100;">else</span><span style="color: #000000;"> {</span>
<span style="color: #000000;">      </span><span style="font-style: italic;color: #808080;"># Compute the publishing date of the track</span>
<span style="color: #000000;">      </span><span style="color: #5555ff;">$track_publish_queue_order</span><span style="color: #000000;">++</span><span style="color: #008000;">;</span>
<span style="color: #000000;">      </span><span style="color: #5555ff;">$new_publishing_date</span><span style="color: #000000;"> = </span><span style="color: #000080;">strtotime</span><span style="color: #008000;">(</span><span style="color: #5555ff;">$delay</span><span style="color: #008000;">,</span><span style="color: #000000;"> </span><span style="color: #5555ff;">$previous_queue_date</span><span style="color: #008000;">);</span>
<span style="color: #000000;">      </span><span style="color: #5555ff;">$track_dates</span><span style="color: #008000;">[</span><span style="color: #5555ff;">$track_number</span><span style="color: #008000;">]</span><span style="color: #000000;"> = </span><span style="color: #5555ff;">$new_publishing_date</span><span style="color: #008000;">;</span>
<span style="color: #000000;">      </span><span style="color: #5555ff;">$previous_queue_date</span><span style="color: #000000;"> = </span><span style="color: #5555ff;">$new_publishing_date</span><span style="color: #008000;">;</span>
<span style="color: #000000;">    }</span>
<span style="color: #000000;">    </span><span style="font-style: italic;color: #808080;"># Update the start date of the period when a track is considered &#34;new&#34;</span>
<span style="color: #000000;">    </span><span style="color: #a1a100;">if</span><span style="color: #000000;"> </span><span style="color: #008000;">((</span><span style="color: #5555ff;">$new_start_date</span><span style="color: #000000;"> &lt;= </span><span style="color: #5555ff;">$track_dates</span><span style="color: #008000;">[</span><span style="color: #5555ff;">$track_number</span><span style="color: #008000;">])</span><span style="color: #000000;"> </span><span style="font-weight: bold;color: #000000;">and</span>
<span style="color: #000000;">        </span><span style="color: #008000;">(</span><span style="color: #5555ff;">$track_dates</span><span style="color: #008000;">[</span><span style="color: #5555ff;">$track_number</span><span style="color: #008000;">]</span><span style="color: #000000;"> &lt;= </span><span style="color: #5555ff;">$today</span><span style="color: #008000;">))</span><span style="color: #000000;"> {</span>
<span style="color: #000000;">      </span><span style="color: #5555ff;">$new_start_date</span><span style="color: #000000;"> = </span><span style="color: #5555ff;">$track_dates</span><span style="color: #008000;">[</span><span style="color: #5555ff;">$track_number</span><span style="color: #008000;">];</span>
<span style="color: #000000;">    }</span>
<span style="color: #000000;">  }</span>
<span style="color: #000000;">  </span><span style="font-style: italic;color: #808080;"># The end of the &#34;new&#34; track period is always today</span>
<span style="color: #000000;">  </span><span style="color: #5555ff;">$new_stop_date</span><span style="color: #000000;"> = </span><span style="color: #5555ff;">$today</span><span style="color: #008000;">;</span>

<span style="color: #000000;">  </span><span style="font-style: italic;color: #808080;"># HTML rendering of each track</span>
<span style="color: #000000;">  </span><span style="color: #5555ff;">$track_number</span><span style="color: #000000;">     = </span><span style="color: #0000ff;">0</span><span style="color: #008000;">;</span>
<span style="color: #000000;">  </span><span style="color: #5555ff;">$html_published</span><span style="color: #000000;">   = </span><span style="color: #dd0000;">&#34;&lt;table&gt;&#34;</span><span style="color: #008000;">;</span>
<span style="color: #000000;">  </span><span style="color: #5555ff;">$html_unpublished</span><span style="color: #000000;"> = </span><span style="color: #5555ff;">$html_published</span><span style="color: #008000;">;</span>
<span style="color: #000000;">  </span><span style="color: #a1a100;">foreach</span><span style="color: #008000;">(</span><span style="color: #5555ff;">$track_list</span><span style="color: #000000;"> </span><span style="color: #a1a100;">as</span><span style="color: #000000;"> </span><span style="color: #5555ff;">$track_title</span><span style="color: #000000;"> =&gt; </span><span style="color: #5555ff;">$track_file</span><span style="color: #008000;">)</span><span style="color: #000000;"> {</span>
<span style="color: #000000;">    </span><span style="color: #5555ff;">$track_number</span><span style="color: #000000;">++</span><span style="color: #008000;">;</span>
<span style="color: #000000;">    </span><span style="color: #5555ff;">$new</span><span style="color: #000000;">          = </span><span style="font-weight: bold;color: #000000;">False</span><span style="color: #008000;">;</span>
<span style="color: #000000;">    </span><span style="color: #5555ff;">$published</span><span style="color: #000000;">    = </span><span style="font-weight: bold;color: #000000;">False</span><span style="color: #008000;">;</span>
<span style="color: #000000;">    </span><span style="color: #5555ff;">$track_date</span><span style="color: #000000;">   = </span><span style="color: #5555ff;">$track_dates</span><span style="color: #008000;">[</span><span style="color: #5555ff;">$track_number</span><span style="color: #008000;">];</span>
<span style="color: #000000;">    </span><span style="color: #5555ff;">$track_html</span><span style="color: #000000;">   = </span><span style="color: #dd0000;">&#39;&#39;</span><span style="color: #008000;">;</span>
<span style="color: #000000;">    </span><span style="color: #5555ff;">$publish_date</span><span style="color: #000000;"> = </span><span style="color: #dd0000;">&#39;&#39;</span><span style="color: #008000;">;</span>
<span style="color: #000000;">    </span><span style="font-style: italic;color: #808080;"># Is the track published ?</span>
<span style="color: #000000;">    </span><span style="color: #a1a100;">if</span><span style="color: #000000;"> </span><span style="color: #008000;">(</span><span style="color: #5555ff;">$track_dates</span><span style="color: #008000;">[</span><span style="color: #5555ff;">$track_number</span><span style="color: #008000;">]</span><span style="color: #000000;"> &lt; </span><span style="color: #5555ff;">$today</span><span style="color: #008000;">)</span><span style="color: #000000;"> {</span>
<span style="color: #000000;">      </span><span style="color: #5555ff;">$published</span><span style="color: #000000;"> = </span><span style="font-weight: bold;color: #000000;">True</span><span style="color: #008000;">;</span>
<span style="color: #000000;">    }</span>
<span style="color: #000000;">    </span><span style="font-style: italic;color: #808080;"># Is the track new ?</span>
<span style="color: #000000;">    </span><span style="color: #a1a100;">if</span><span style="color: #000000;"> </span><span style="color: #008000;">((</span><span style="color: #5555ff;">$new_start_date</span><span style="color: #000000;"> &lt;= </span><span style="color: #5555ff;">$track_date</span><span style="color: #008000;">)</span><span style="color: #000000;"> </span><span style="font-weight: bold;color: #000000;">and</span>
<span style="color: #000000;">        </span><span style="color: #008000;">(</span><span style="color: #5555ff;">$track_date</span><span style="color: #000000;"> &lt;= </span><span style="color: #5555ff;">$new_stop_date</span><span style="color: #008000;">))</span><span style="color: #000000;"> {</span>
<span style="color: #000000;">      </span><span style="color: #5555ff;">$new</span><span style="color: #000000;"> = </span><span style="font-weight: bold;color: #000000;">True</span><span style="color: #008000;">;</span>
<span style="color: #000000;">    }</span>
<span style="color: #000000;">    </span><span style="color: #a1a100;">if</span><span style="color: #000000;"> </span><span style="color: #008000;">(</span><span style="color: #5555ff;">$new</span><span style="color: #008000;">)</span><span style="color: #000000;"> {</span>
<span style="color: #000000;">      </span><span style="color: #5555ff;">$track_html</span><span style="color: #000000;"> .= </span><span style="color: #dd0000;">&#39;&lt;tr&gt;&lt;td&gt;&lt;b&gt;NEW!&lt;/b&gt; &lt;/td&gt;&lt;td&gt;&#39;</span><span style="color: #008000;">;</span>
<span style="color: #000000;">    } </span><span style="color: #a1a100;">else</span><span style="color: #000000;"> {</span>
<span style="color: #000000;">      </span><span style="color: #5555ff;">$track_html</span><span style="color: #000000;"> .= </span><span style="color: #dd0000;">&#39;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&#39;</span><span style="color: #008000;">;</span>
<span style="color: #000000;">    }</span>
<span style="color: #000000;">    </span><span style="font-style: italic;color: #808080;"># Create a direct download link for each track format</span>
<span style="color: #000000;">    </span><span style="color: #a1a100;">if</span><span style="color: #000000;"> </span><span style="color: #008000;">(</span><span style="color: #5555ff;">$published</span><span style="color: #008000;">)</span><span style="color: #000000;"> {</span>
<span style="color: #000000;">      </span><span style="color: #a1a100;">foreach</span><span style="color: #008000;">(</span><span style="color: #5555ff;">$track_format</span><span style="color: #000000;"> </span><span style="color: #a1a100;">as</span><span style="color: #000000;"> </span><span style="color: #5555ff;">$format_ext</span><span style="color: #000000;"> =&gt; </span><span style="color: #5555ff;">$format_name</span><span style="color: #008000;">)</span><span style="color: #000000;"> {</span>
<span style="color: #000000;">        </span><span style="color: #5555ff;">$track_html</span><span style="color: #000000;"> .= </span><span style="color: #000080;">sprintf</span><span style="color: #008000;">(</span><span style="color: #000000;"> </span><span style="color: #dd0000;">&#39;&lt;a href=&#34;http://coolcavemen.com/%s%s&#34;&gt;&#39;</span>
<span style="color: #000000;">                              </span><span style="color: #008000;">,</span><span style="color: #000000;"> </span><span style="color: #5555ff;">$track_file</span>
<span style="color: #000000;">                              </span><span style="color: #008000;">,</span><span style="color: #000000;"> </span><span style="color: #5555ff;">$format_ext</span>
<span style="color: #000000;">                              </span><span style="color: #008000;">);</span>
<span style="color: #000000;">        </span><span style="color: #5555ff;">$track_html</span><span style="color: #000000;"> .= </span><span style="color: #000080;">sprintf</span><span style="color: #008000;">(</span><span style="color: #dd0000;">&#39;%s&lt;/a&gt; &#39;</span><span style="color: #008000;">,</span><span style="color: #000000;"> </span><span style="color: #5555ff;">$format_name</span><span style="color: #008000;">);</span>
<span style="color: #000000;">      }</span>
<span style="color: #000000;">    }</span>
<span style="color: #000000;">    </span><span style="color: #a1a100;">if</span><span style="color: #000000;"> </span><span style="color: #008000;">(</span><span style="color: #000000;">! </span><span style="color: #5555ff;">$published</span><span style="color: #008000;">)</span><span style="color: #000000;"> </span><span style="color: #5555ff;">$track_html</span><span style="color: #000000;"> .= </span><span style="color: #dd0000;">&#39;&lt;span class=&#34;disabled&#34;&gt;&#39;</span><span style="color: #008000;">;</span>
<span style="color: #000000;">    </span><span style="color: #5555ff;">$track_html</span><span style="color: #000000;"> .= </span><span style="color: #dd0000;">&#39;&amp;mdash; &#39;</span><span style="color: #008000;">;</span>
<span style="color: #000000;">    </span><span style="font-style: italic;color: #808080;"># Show track as non-available, and print its release date</span>
<span style="color: #000000;">    </span><span style="color: #a1a100;">if</span><span style="color: #000000;"> </span><span style="color: #008000;">(</span><span style="color: #000000;">! </span><span style="color: #5555ff;">$published</span><span style="color: #008000;">)</span>
<span style="color: #000000;">      </span><span style="color: #5555ff;">$track_html</span><span style="color: #000000;"> .= </span><span style="color: #000080;">sprintf</span><span style="color: #008000;">(</span><span style="color: #000000;"> </span><span style="color: #dd0000;">&#39;&lt;b&gt;%s %s, %sh &amp;raquo;&lt;/b&gt; &#39;</span>
<span style="color: #000000;">                            </span><span style="color: #008000;">,</span><span style="color: #000000;"> </span><span style="color: #000080;">date</span><span style="color: #008000;">(</span><span style="color: #dd0000;">&#34;j&#34;</span><span style="color: #008000;">,</span><span style="color: #000000;"> </span><span style="color: #5555ff;">$track_date</span><span style="color: #008000;">)</span>
<span style="color: #000000;">                            </span><span style="color: #008000;">,</span><span style="color: #000000;"> </span><span style="color: #5555ff;">$months</span><span style="color: #008000;">[(</span><span style="color: #000000;">int</span><span style="color: #008000;">)</span><span style="color: #000000;"> </span><span style="color: #000080;">date</span><span style="color: #008000;">(</span><span style="color: #dd0000;">&#34;n&#34;</span><span style="color: #008000;">,</span><span style="color: #000000;"> </span><span style="color: #5555ff;">$track_date</span><span style="color: #008000;">)]</span>
<span style="color: #000000;">                            </span><span style="color: #008000;">,</span><span style="color: #000000;"> </span><span style="color: #000080;">date</span><span style="color: #008000;">(</span><span style="color: #dd0000;">&#34;H&#34;</span><span style="color: #008000;">,</span><span style="color: #000000;"> </span><span style="color: #5555ff;">$track_date</span><span style="color: #008000;">)</span>
<span style="color: #000000;">                            </span><span style="color: #008000;">);</span>
<span style="color: #000000;">    </span><span style="color: #5555ff;">$track_html</span><span style="color: #000000;"> .= </span><span style="color: #000080;">sprintf</span><span style="color: #008000;">(</span><span style="color: #dd0000;">&#39;%s&lt;br/&gt;&#39;</span><span style="color: #008000;">,</span><span style="color: #000000;"> </span><span style="color: #5555ff;">$track_title</span><span style="color: #008000;">);</span>
<span style="color: #000000;">    </span><span style="color: #a1a100;">if</span><span style="color: #000000;"> </span><span style="color: #008000;">(</span><span style="color: #000000;">! </span><span style="color: #5555ff;">$published</span><span style="color: #008000;">)</span><span style="color: #000000;"> </span><span style="color: #5555ff;">$track_html</span><span style="color: #000000;"> .= </span><span style="color: #dd0000;">&#39;&lt;/span&gt;&#39;</span><span style="color: #008000;">;</span>
<span style="color: #000000;">    </span><span style="color: #5555ff;">$track_html</span><span style="color: #000000;"> .= </span><span style="color: #dd0000;">&#39;&lt;/td&gt;&lt;/tr&gt;&#39;</span><span style="color: #008000;">;</span>
<span style="color: #000000;">    </span><span style="color: #a1a100;">if</span><span style="color: #000000;"> </span><span style="color: #008000;">(</span><span style="color: #5555ff;">$published</span><span style="color: #008000;">)</span><span style="color: #000000;"> {</span>
<span style="color: #000000;">      </span><span style="color: #5555ff;">$html_published</span><span style="color: #000000;"> .= </span><span style="color: #5555ff;">$track_html</span><span style="color: #008000;">;</span>
<span style="color: #000000;">    } </span><span style="color: #a1a100;">else</span><span style="color: #000000;"> {</span>
<span style="color: #000000;">      </span><span style="color: #5555ff;">$html_unpublished</span><span style="color: #000000;"> .= </span><span style="color: #5555ff;">$track_html</span><span style="color: #008000;">;</span>
<span style="color: #000000;">    }</span>
<span style="color: #000000;">  }</span>
<span style="color: #000000;">  </span><span style="color: #a1a100;">return</span><span style="color: #000000;"> </span><span style="color: #5555ff;">$html_published</span><span style="color: #000000;">.</span><span style="color: #dd0000;">&#39;&lt;/table&gt;&lt;hr/&gt;&#39;</span><span style="color: #000000;">.</span><span style="color: #5555ff;">$html_unpublished</span><span style="color: #000000;">.</span><span style="color: #dd0000;">&#39;&lt;/table&gt;&#39;</span><span style="color: #008000;">;</span>
<span style="color: #000000;">}</span>

<span style="font-weight: bold;color: #000000;">?&gt;</span></pre></body>
</html>
